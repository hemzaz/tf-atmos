---
# Development account configuration mixin
# Cost-optimized, flexible settings for development workloads

vars:
  # Account identification
  account_type: "development"
  account_name: "development"
  business_critical: false

  # Development-optimized availability settings
  high_availability:
    enabled: false
    multi_az: false  # Single AZ to save costs
    cross_region_backup: false
    auto_scaling_enabled: true
    load_balancer_enabled: false  # Use only when needed

  # Security configuration for development
  security:
    # Relaxed security for development productivity
    enable_waf: false
    encryption_at_rest: true  # Still encrypt data
    encryption_in_transit: true
    require_mfa: false  # Don't require MFA for dev access
    session_timeout: 28800  # 8 hours for dev work

    # Logging and monitoring (reduced)
    cloudtrail_enabled: true
    vpc_flow_logs: false  # Disable to save costs
    config_service_enabled: false  # Disable to save costs
    guardduty_enabled: false  # Disable to save costs
    security_hub_enabled: false  # Disable to save costs

    # Access control (relaxed)
    enforce_least_privilege: false
    require_approval_for_privileged_access: false
    enable_access_analyzer: false

    # Compliance (minimal)
    compliance_frameworks: []
    enable_compliance_monitoring: false
    audit_log_retention_days: 90  # 3 months

  # Backup and disaster recovery (minimal)
  backup:
    enabled: true
    retention_days: 7  # Short retention for cost savings
    cross_region_backup: false
    point_in_time_recovery: false
    automated_backup_window: "03:00-04:00"  # UTC
    backup_deletion_protection: false

  # Monitoring and alerting (basic)
  monitoring:
    detailed_monitoring: false  # Basic monitoring to save costs
    custom_metrics: false
    alerting_enabled: true
    notification_channels:
      - email: "dev-team@company.com"
      - slack: "#dev-alerts"
      - pagerduty: false  # No pager duty for dev

    # Performance monitoring (disabled to save costs)
    performance_insights: false
    x_ray_tracing: false

  # Cost optimization (aggressive)
  cost_optimization:
    # Spot instances and scheduling
    spot_instances_enabled: true
    spot_instance_percentage: 50  # 50% spot instances

    # Auto-scheduling for cost savings
    auto_shutdown:
      enabled: true
      schedule: "business-hours"  # Shut down outside business hours
      weekend_shutdown: true

    # Resource scheduling
    auto_scaling:
      enabled: true
      scale_in_protection: false
      min_capacity: 0  # Can scale to zero

    # Lifecycle management (aggressive)
    s3_lifecycle_policies: true
    s3_intelligent_tiering: true
    ebs_snapshot_lifecycle: true
    log_lifecycle_management: true

  # Network configuration (cost-optimized)
  networking:
    # Development networking settings
    dedicated_tenancy: false
    enhanced_networking: false  # Disable to save costs
    placement_groups: false

    # DNS (minimal)
    private_hosted_zones: false
    dns_resolution: true
    dns_hostnames: true

    # VPC configuration (single AZ)
    vpc:
      enable_nat_gateway: true
      single_nat_gateway: true  # Single NAT gateway for cost savings
      enable_vpn_gateway: false
      enable_dns_hostnames: true
      enable_dns_support: true

  # Compute configuration (cost-optimized)
  compute:
    # EC2 settings (smaller instances)
    instance_types:
      preferred: ["t3.micro", "t3.small", "t3.medium"]
      allowed: ["t3.*", "t2.*", "m5.large", "c5.large"]

    # EKS settings (cost-optimized)
    kubernetes:
      version: "1.28"
      endpoint_private_access: false
      endpoint_public_access: true  # Public for easier access
      node_group_capacity_type: "SPOT"  # Use spot instances
      node_group_instance_types: ["t3.medium", "t3.large"]

  # Database configuration (cost-optimized)
  database:
    # RDS settings
    multi_az: false  # Single AZ for cost savings
    backup_retention_period: 7
    backup_window: "03:00-04:00"  # UTC
    maintenance_window: "sun:04:00-sun:05:00"  # UTC
    deletion_protection: false  # Allow easy cleanup
    encryption_at_rest: true
    performance_insights_enabled: false  # Disable to save costs
    monitoring_interval: 0  # Disable enhanced monitoring

    # Parameter group settings
    enhanced_monitoring: false
    log_exports: []  # Disable log exports to save costs

  # Storage configuration (cost-optimized)
  storage:
    # S3 settings
    versioning_enabled: false  # Disable versioning to save costs
    mfa_delete: false
    lifecycle_configuration: true
    cross_region_replication: false
    access_logging: false  # Disable to save costs

    # EBS settings
    encrypted: true
    volume_type: "gp3"
    iops: null
    throughput: null

# Development-specific component configurations
components:
  terraform:
    # Development deployment settings
    apply_auto_approve: true  # Auto-approve for faster iteration
    plan_timeout: 15  # Shorter timeout

    # State management
    state_lock_enabled: true
    state_encryption_enabled: true

    # Validation (relaxed)
    validate_required: true
    fmt_required: false  # Don't block on formatting in dev

# Development tags
tags:
  Environment: "development"
  BusinessCritical: "false"
  HighAvailability: "false"
  DisasterRecovery: "false"
  BackupRequired: "false"
  MonitoringLevel: "Basic"
  SecurityLevel: "Standard"
  ComplianceRequired: "false"
  CostOptimized: "true"
  AutoScheduled: "true"