---
# Global tagging strategy and standard tags
# Ensures consistent resource tagging across all environments

# Standard tags applied to all resources
vars:
  # Global standard tags - applied to every resource
  global_tags:
    # Organizational tags
    Organization: "Platform Engineering"
    ManagedBy: "Terraform"
    CreatedBy: "Atmos"
    Framework: "Atmos"

    # Cost allocation tags
    CostCenter: "${COST_CENTER}"
    Project: "${PROJECT_NAME}"
    Owner: "${RESOURCE_OWNER}"

    # Operational tags
    Environment: "${ENVIRONMENT}"
    Tenant: "${TENANT}"
    Account: "${ACCOUNT}"
    Region: "${AWS_REGION}"

    # Governance tags
    Compliance: "${COMPLIANCE_FRAMEWORK}"
    DataClassification: "Internal"
    BackupRequired: "true"
    MonitoringEnabled: "true"

    # Lifecycle tags
    CreatedDate: "${CREATION_DATE}"
    LastModified: "${LAST_MODIFIED}"

  # Environment-specific tag templates
  environment_tags:
    production:
      EnvironmentType: "Production"
      BusinessCritical: "true"
      HighAvailability: "true"
      DisasterRecovery: "true"
      BackupRetention: "30"
      MonitoringLevel: "Enhanced"
      SecurityLevel: "High"

    staging:
      EnvironmentType: "Staging"
      BusinessCritical: "false"
      HighAvailability: "false"
      DisasterRecovery: "false"
      BackupRetention: "14"
      MonitoringLevel: "Standard"
      SecurityLevel: "Standard"

    development:
      EnvironmentType: "Development"
      BusinessCritical: "false"
      HighAvailability: "false"
      DisasterRecovery: "false"
      BackupRetention: "7"
      MonitoringLevel: "Basic"
      SecurityLevel: "Standard"

    sandbox:
      EnvironmentType: "Sandbox"
      BusinessCritical: "false"
      HighAvailability: "false"
      DisasterRecovery: "false"
      BackupRetention: "1"
      MonitoringLevel: "Minimal"
      SecurityLevel: "Relaxed"

  # Component-specific tag templates
  component_tags:
    vpc:
      ComponentType: "Networking"
      ServiceLevel: "Foundation"

    eks:
      ComponentType: "Compute"
      ServiceLevel: "Platform"

    rds:
      ComponentType: "Database"
      ServiceLevel: "Data"
      DataPersistence: "true"

    s3:
      ComponentType: "Storage"
      ServiceLevel: "Foundation"
      DataPersistence: "true"

    lambda:
      ComponentType: "Compute"
      ServiceLevel: "Application"

    iam:
      ComponentType: "Security"
      ServiceLevel: "Foundation"

    kms:
      ComponentType: "Security"
      ServiceLevel: "Foundation"

    secretsmanager:
      ComponentType: "Security"
      ServiceLevel: "Foundation"
      DataSensitivity: "High"

    monitoring:
      ComponentType: "Observability"
      ServiceLevel: "Platform"

  # Compliance-specific tags
  compliance_tags:
    soc2:
      ComplianceFramework: "SOC2"
      AuditScope: "true"
      DataRetention: "7years"
      AccessLogging: "required"

    pci_dss:
      ComplianceFramework: "PCI-DSS"
      DataSensitivity: "High"
      EncryptionRequired: "true"
      AccessRestricted: "true"

    hipaa:
      ComplianceFramework: "HIPAA"
      DataSensitivity: "PHI"
      EncryptionRequired: "true"
      AuditLogging: "required"
      AccessControlled: "true"

    iso27001:
      ComplianceFramework: "ISO27001"
      InformationAsset: "true"
      RiskAssessed: "true"
      ControlsImplemented: "true"

  # Cost optimization tags
  cost_tags:
    # Scheduling tags for cost optimization
    scheduling:
      AutoStart: "true"
      AutoStop: "true"
      Schedule: "business-hours"  # business-hours, 24x7, custom

    # Right-sizing tags
    rightsizing:
      RightSizeCandidate: "false"
      LastRightSized: "never"
      ResourceUtilization: "unknown"

    # Reserved instance tags
    reserved_instances:
      RICandidate: "false"
      RICoverage: "none"
      SavingsOpportunity: "unknown"

  # Security classification tags
  security_classification:
    # Data classification levels
    data_classification:
      public: "Public"
      internal: "Internal"
      confidential: "Confidential"
      restricted: "Restricted"

    # Security zones
    security_zones:
      dmz: "DMZ"
      web: "Web"
      application: "Application"
      database: "Database"
      management: "Management"

  # Disaster recovery tags
  disaster_recovery_tags:
    # Recovery objectives
    rpo: "4h"  # Recovery Point Objective
    rto: "1h"  # Recovery Time Objective

    # DR configuration
    dr_tier: "Tier1"  # Tier1, Tier2, Tier3
    backup_frequency: "daily"
    cross_region_backup: "true"

# Tag validation rules
tag_validation:
  required_tags:
    - "Environment"
    - "Tenant"
    - "Owner"
    - "CostCenter"
    - "ManagedBy"

  tag_patterns:
    Environment: "^(production|staging|development|sandbox)$"
    Tenant: "^[a-z][a-z0-9-]*[a-z0-9]$"
    ComponentType: "^(Networking|Compute|Database|Storage|Security|Observability|Application)$"